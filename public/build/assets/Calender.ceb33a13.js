import{j as e,s as Z,o as _,a as p,F as ee,d as te,p as ne,b as ae,c as le,g as re,i as se,e as oe,f as ie,r as g,h as ce,u as q,k as z,l as de,m as P,n as ue,q as K,t as pe,v as T,w as Q,x as Y,y as U,z as fe,A as me,B as he,C as H,D as ge,E as xe}from"./app.2e74c8bd.js";import{u as F,F as V,a as ve,b as ye,c as be,d as Ne,e as b,f as L,g as W,h as we,i as ke,j as G,k as B,l as R,m as Ce,n as Fe,o as Se,p as De,q as je}from"./ThemeToggle.ad0fd3a3.js";import{l as y,a as w}from"./bootstrap.61a368ed.js";import{A as Ee}from"./Authenticated.e6587ee4.js";import"./ApplicationLogo.4e28a814.js";function $e({date:r}){const o=F();function l(){o(Z({...r,selected:!0}))}return e("td",{className:`
            p-1  box-border hover:cursor-pointer 
            ${r.selected===!0?"text-zinc-50":"dark:hover:bg-slate-700 hover:bg-slate-400"}
            ${r.class==="last"?"dark:bg-cyan-900":""}
            ${r.class==="next"?"dark:bg-sky-900":""}
            `,id:r.id,onClick:l,children:e("div",{className:`flex flex-row gap-1 items-center justify-center m-auto w-12 h-12 relative
                ${r.selected===!0?'bg-indigo-900 relative before:content-[""] before:absolute  before:-inset-1 before:ring-4 before:ring-indigo-900':""}
                ${r.events.length>0?"font-bold":"text-gray-600 dark:text-gray-200"}`,children:r.day})})}function Ie(){const r=F();return e("div",{className:"absolute p-4 bg-pink-800 rounded-full bottom-10 right-10 hover:bg-pink-900 hover:cursor-pointer drop-shadow-lg",onClick:()=>r(_()),children:e(V,{className:"text-zinc-50"})})}function C({type:r,value:o,className:l,onClick:m}){function x(f){switch(f){case 1:return e(Ne,{className:"fill-zinc-50"});case 2:return e(be,{className:"fill-zinc-50"});case 3:return e(ye,{className:"fill-zinc-50"});default:return e(ve,{className:"fill-zinc-50"})}}function h(f){switch(f){case 1:return"bg-violet-800";case 2:return"bg-blue-800";case 3:return"bg-green-800";default:return"bg-red-800"}}return e("div",{onClick:m,value:`${o||""}`,className:`${h(r)} rounded-full p-1.5 my-0.5 w-max ${l}`,children:x(r)})}function Me(){const r=b(l=>l.calender.day),o=F();return e("div",{className:"h-full max-h-full overflow-hidden text-center",children:r&&p(ee,{children:[e("p",{children:te(r)}),e("div",{className:"flex flex-col items-center h-full max-h-full pb-8 overflow-y-auto",children:r.events.map(l=>p("div",{className:"flex flex-row items-center justify-center gap-1 w-max",children:[e("h2",{children:ne(`${l.date} ${l.time}`)}),p("div",{className:"flex flex-row gap-2 pl-2 border-l-2 hover:cursor-pointer",onClick:()=>o(ae(l)),children:[e(C,{type:l.type}),e("p",{children:l.note})]})]},l.id))})]})})}function Te(){const r=b(m=>m.calender.month),o=b(m=>m.calender.year),l=F();return p("div",{children:[p("div",{className:"flex flex-row justify-center",children:[e("div",{className:"p-2 hover:cursor-pointer",onClick:()=>l(le()),children:e(L,{})}),e("p",{className:"w-1/4 text-center",children:re({year:o,month:r})}),e("div",{className:"p-2 hover:cursor-pointer",onClick:()=>l(se()),children:e(W,{})})]}),p("div",{className:"flex flex-row justify-center",children:[e("div",{className:"p-2 hover:cursor-pointer",onClick:()=>l(oe()),children:e(L,{})}),e("p",{className:"w-1/4 text-center",children:o}),e("div",{className:"p-2 hover:cursor-pointer",onClick:()=>l(ie()),children:e(W,{})})]})]})}function J({children:r,onChange:o,className:l,value:m}){const[x,h]=g.exports.useState(!1),[f,i]=g.exports.useState(m||4),a=g.exports.useRef(null),[d,v]=g.exports.useState();g.exports.useEffect(()=>{i(m)},[m]);function N(t){typeof t!="undefined"&&(o(t),i(t),h(!1))}function c(t){const n=a.current.children[1];h(!0),a.current===t.target&&v([...n.children].indexOf(n.firstChild))}function s(t){t.code==="ArrowDown"?d===r.length-1?v(0):v(d+1):t.code==="ArrowUp"?v(d===0?r.length-1:d-1):typeof d!="undefined"&&(t.code==="Enter"||t.code==="Space")?(i(d+1),o(d+1),h(!1)):t.code==="Escape"&&h(!1)}return g.exports.useEffect(()=>{typeof d!="undefined"&&ce.exports.findDOMNode(a.current.children[1].children[d]).focus()},[d]),p("div",{ref:a,tabIndex:0,className:`relative w-4/5 ${typeof l!="undefined"?l:""}`,onFocus:c,onBlur:()=>h(!1),onKeyDown:s,children:[p("div",{className:"flex flex-row items-center",onClick:()=>h(!x),children:[e(C,{type:f}),x?e(we,{className:"justify-self-end"}):e(ke,{className:"justify-self-end"})]}),e("div",{className:`absolute top-full right-0 left-0 dark:bg-slate-800 p-2 border-2 dark:border-slate-400 rounded ${x?"flex flex-col":"hidden overflow-hidden"}`,children:r.map(t=>e("div",{value:t.props.value,onClick:()=>N(t.props.value),children:t},t.props.value))})]})}function ze(){const r=F(),{data:o,setData:l,post:m,processing:x,errors:h}=q({title:null,note:null,type:null,time:null,date:null});function f(a){a.preventDefault(),o.title!==null&&o.time!==null&&o.date!==null&&o.type!==null&&m("/calender",{onSuccess:({props:{events:d}})=>{r(z(d)),i()},onFinish:()=>{h&&Object.keys(h).length!==0&&console.log(h)}})}function i(){l({title:null,note:null,type:null,time:null,date:null}),r(de())}return e("div",{className:"absolute top-0 bottom-0 left-0 right-0 flex flex-col items-center justify-center dark:text-zinc-50 drop-shadow-xl",children:p("form",{className:"relative grid items-start justify-start grid-cols-1 gap-2 px-4 py-10 bg-gray-100 border-2 grid-cols-max dark:bg-slate-800 dark:border-slate-400 rounded-2xl",onSubmit:f,children:[e("h2",{className:"col-span-2 mb-2 font-bold justify-self-center",children:"New Event"}),e("label",{htmlFor:"title",className:"flex flex-row gap-2",children:e("p",{children:"Title"})}),e("input",{className:"rounded form-input dark:bg-slate-500",id:"title",type:"text",onChange:a=>l("title",a.target.value)}),e("label",{htmlFor:"note",className:"flex flex-row gap-2",children:e("p",{children:"Note"})}),e("input",{className:"rounded form-input dark:bg-slate-500",id:"note",type:"text",onChange:a=>l("note",a.target.value)}),e("label",{htmlFor:"type",className:"flex flex-row gap-2",children:e("p",{children:"Type"})}),p(J,{id:"type",title:"type",onChange:a=>l("type",a),children:[e(C,{type:1,value:1}),e(C,{type:2,value:2}),e(C,{type:3,value:3})]}),e("label",{htmlFor:"time",className:"flex flex-row gap-2",children:e("p",{children:"Time"})}),e("input",{className:"rounded form-input dark:bg-slate-500",id:"time",type:"time",onChange:a=>l("time",a.target.value)}),e("label",{htmlFor:"time",className:"flex flex-row gap-2",children:e("p",{children:"Date"})}),e("input",{className:"rounded form-input dark:bg-slate-500",id:"date",type:"date",onChange:a=>l("date",a.target.value)}),e("button",{type:"submit",disable:x,className:"col-span-2 p-1 mt-2 bg-pink-800 border border-pink-200 rounded w-max justify-self-center",children:"Create"}),e("button",{className:"absolute top-4 right-4",onClick:i,children:e(G,{})})]})})}function Oe({value:r,onChange:o,className:l,id:m}){const[x,h]=g.exports.useState(0),[f,i]=g.exports.useState(0),a=g.exports.useRef(null),d=g.exports.useRef(null);function v(s){let t,n;return typeof s!="undefined"&&s!==""&&(t=s.match("(^.[0-9])"),n=s.match("(.[0-9]$)")),{hours:t&&t.length?y.exports.parseInt(t[0]):0,minutes:n&&n.length?y.exports.parseInt(n[0]):0}}g.exports.useEffect(()=>{const{minutes:s,hours:t}=v(r);h(t),i(s)},[r]);function N(s){const t=s.target.value!==""?y.exports.parseInt(s.target.value):0;t<=y.exports.parseInt(s.target.max)&&h(t)}function c(s){const t=s.target.value!==""?y.exports.parseInt(s.target.value):0;console.log(t),t<=y.exports.parseInt(s.target.max)&&t>=y.exports.parseInt(s.target.min)&&i(t)}return g.exports.useEffect(()=>{o(`${x.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`)},[x,f]),p("div",{id:m,className:`flex flex-row gap-1 ${l}`,children:[p("div",{className:"flex flex-col items-center justify-center w-12",children:[e("div",{className:"w-full rounded-t bg-gradient-to-b from-gray-600 to-gray-500 hover:cursor-pointer",children:e(B,{className:"w-full",onClick:()=>{const s=y.exports.parseInt(a.current.value);s<y.exports.parseInt(a.current.max)&&h(s+1)}})}),e("input",{className:"w-full text-center bg-transparent dark:border-zinc-50",type:"number",ref:a,min:0,max:24,value:x,onChange:N}),e("div",{className:"w-full rounded-b bg-gradient-to-t from-gray-600 to-gray-500 hover:cursor-pointer",children:e(R,{className:"w-full",onClick:()=>{const s=y.exports.parseInt(a.current.value);s>y.exports.parseInt(a.current.min)&&h(s-1)}})})]}),p("div",{className:"flex flex-col items-center justify-center w-12",children:[e("div",{className:"w-full rounded-t bg-gradient-to-b from-gray-600 to-gray-500 hover:cursor-pointer",children:e(B,{className:"w-full",onClick:()=>{const s=y.exports.parseInt(d.current.value);s<y.exports.parseInt(d.current.max)&&i(s+1)}})}),e("input",{className:"w-full text-center bg-transparent dark:border-zinc-50",type:"number",ref:d,min:0,max:60,value:f,onChange:c}),e("div",{className:"w-full rounded-b bg-gradient-to-t from-gray-600 to-gray-500 hover:cursor-pointer",children:e(R,{className:"w-full",onClick:()=>{const s=y.exports.parseInt(d.current.value);s>y.exports.parseInt(d.current.min)&&i(s-1)}})})]})]})}function Ae(){const r=F(),o=b(c=>c.form.event),{data:l,setData:m,patch:x,delete:h,processing:f,errors:i}=q({title:null,note:null,type:null,time:null,date:null});g.exports.useEffect(()=>{a()},[]);function a(){m({title:o.title,note:o.note,type:o.type,time:P(o.time),date:o.date})}function d(){m({title:null,note:null,type:null,time:null,date:null}),r(ue())}function v(c){c.preventDefault(),x(`/calender/${o.id}`,{onSuccess:({props:{events:s}})=>{r(z(s)),d()},onFinish:()=>{i&&Object.keys(i).length!==0&&console.log(i)}})}function N(c){c.preventDefault(),h(`/calender/${o.id}`,{onSuccess:({props:{events:s}})=>{r(z(s)),d()}})}return e("div",{className:"absolute top-0 bottom-0 left-0 right-0 flex flex-col items-center justify-center dark:text-zinc-50 drop-shadow-xl",children:p("form",{className:"relative grid items-start justify-start grid-cols-1 gap-2 px-4 py-10 bg-gray-100 border-2 grid-cols-max dark:bg-slate-800 dark:border-slate-400 rounded-2xl",onSubmit:v,children:[e("h2",{className:"col-span-3 mb-2 font-bold justify-self-center",children:"Edit Event"}),e("label",{htmlFor:"title",className:"flex flex-row gap-2",children:e("p",{children:"Title"})}),e("input",{className:"col-span-2 rounded form-input dark:bg-slate-500",id:"title",type:"text",value:l.title?l.title:"",onChange:c=>m("title",c.target.value)}),e("label",{htmlFor:"note",className:"flex flex-row gap-2",children:e("p",{children:"Note"})}),e("input",{className:"col-span-2 rounded form-input dark:bg-slate-500",id:"note",type:"text",value:l.note?l.note:"",onChange:c=>m("note",c.target.value)}),e("label",{htmlFor:"type",className:"flex flex-row gap-2",children:e("p",{children:"Type"})}),p(J,{id:"type",title:"type",value:l.type?l.type:4,className:"col-span-2",onChange:c=>m("type",c),children:[e(C,{type:1,value:1}),e(C,{type:2,value:2}),e(C,{type:3,value:3})]}),e("label",{htmlFor:"time",className:"flex flex-row gap-2",children:e("p",{children:"Time"})}),e(Oe,{className:"col-span-2 form-input ",id:"time",value:l.time?l.time:"",onChange:c=>m("time",P(c))}),e("label",{htmlFor:"time",className:"flex flex-row gap-2",children:e("p",{children:"Date"})}),e("input",{className:"col-span-2 rounded form-input dark:bg-slate-500",id:"date",type:"date",value:l.date?l.date:"",onChange:c=>m("date",c.target.value)}),p("div",{className:"flex flex-row justify-end col-span-3 gap-3",children:[e("button",{onClick:N,type:"button",disabled:f,className:"w-20 p-1 mt-2 bg-pink-800 border border-pink-200 rounded text-zinc-50 justify-self-center",children:"Delete"}),e("button",{onClick:a,type:"button",disabled:f,className:"w-20 p-1 mt-2 bg-pink-800 border border-pink-200 rounded text-zinc-50 justify-self-center",children:"Reset"}),e("button",{type:"submit",disabled:f,className:"w-20 p-1 mt-2 bg-pink-800 border border-pink-200 rounded text-zinc-50 justify-self-center",children:"Edit"})]}),e("button",{className:"absolute top-4 right-4",onClick:d,children:e(G,{})})]})})}function Re({className:r}){const o=F(),[l,m]=g.exports.useState(""),[x,h]=g.exports.useState(!1),[f,i]=g.exports.useState(null),a=b(n=>n.user.current),d=b(n=>n.user.default),v=b(n=>n.user.people);function N(){l&&l!==""&&a&&w.post("/person",{name:l}).then(n=>{if(n.status===200){const u=n.data;u&&o(pe(u))}})}function c(n){n&&w.delete(`/person/${n.id}`).then(()=>{a&&w.post("/people",{person:a}).then(u=>{if(u.status===200){const k=u.data;k&&o(T(k.map(j=>({...j,edit:!1}))))}})})}function s(n){n&&w.patch("/people/default",{person:n}).then(u=>{(u.status=200)&&o(Q(n))}).then(()=>{w.get("/people").then(u=>{if(u.status===200){const k=u.data;k&&o(T(k))}})})}function t(){f.name!==f.new&&w.patch("/person",{person:f.id,name:f.new.trim()}).then(()=>{w.get("/people").then(n=>{if(n.status===200){const u=n.data;u&&o(T(u))}})}),i(null)}return p("div",{className:`relative ${r}`,children:[p("div",{className:"bg-slate-600 p-2 rounded hover:cursor-pointer",onClick:()=>h(!x),children:[a?a.name:v[0]&&v[0].name,e(R,{className:"inline ml-4"})]}),p("div",{className:`absolute top-full items-stretch rounded-md -right-32 -left-2 mt-2 z-40 shadow-lg overflow-hidden bg-slate-600 ${x?"":"hidden"}`,children:[v.map((n,u)=>p("div",{className:`flex flex-row items-center gap-1 ${n.id===(a==null?void 0:a.id)?"bg-slate-800":""}`,children:[f&&n.id===f.id?p("div",{className:"flex flex-row items-center p-1 justify-items-start grow",children:[e("input",{className:"p-1 text-gray-600 rounded",value:f.new,onChange:k=>i({...f,new:k.target.value})}),e(Ce,{className:"ml-2 hover:cursor-pointer",onClick:()=>t()})]}):e("div",{className:`pl-2 text-left grow ${n.id===(a==null?void 0:a.id)?"":"hover:cursor-pointer"}`,onClick:()=>{n.id!==(a==null?void 0:a.id)&&(o(K(n)),h(!1))},children:n.name}),p("div",{className:"flex flex-row pr-2",children:[n.id===(d==null?void 0:d.id)?e(Fe,{className:"fill-red-400"}):e(Se,{onClick:()=>s(n),className:"hover:cursor-pointer"}),e(De,{className:"ml-2 hover:cursor-pointer",onClick:()=>{i({...n,new:n.name})}}),e(je,{className:"ml-2 hover:cursor-pointer",onClick:()=>c(n)})]})]},u)),p("div",{className:"flex flex-row items-center pr-1",children:[e("input",{className:"w-full m-1 text-gray-600 rounded shrink",type:"text",value:l,onChange:n=>m(n.target.value)}),e(V,{onClick:N})]})]})]})}function Be({auth:r}){const o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],x=b(t=>t.form.new),h=b(t=>t.form.edit),f=b(t=>t.calender.days),i=b(t=>t.calender.year),a=b(t=>t.calender.month),d=b(t=>t.calender.day),v=b(t=>t.calender.events),N=b(t=>t.user.current),c=F();g.exports.useEffect(()=>{const t=new Date;c(Y(t.getFullYear())),c(U(t.getMonth())),c(fe(r.user)),w.get("/people").then(n=>{if(n.status===200){const u=n.data;u&&c(T(u))}}),w.post("/people/default").then(n=>{if(n.status===200){const u=n.data;u&&(c(Q(u)),c(K(u)))}})},[]),g.exports.useEffect(()=>{N&&N.hasOwnProperty("id")&&w.post("/events",{person:N.id,month:a,year:i}).then(t=>{const n=t.data;t.status===200&&n&&c(z(n))})},[a,i,N]);function s(){const{month:t,year:n}=me({month:a,year:i}),{month:u,year:k}=he({month:a,year:i}),j=H(i,a),X=H(i,t),O=new Date(i,a,1).getDay();for(let E=0;E<5;E++)for(let $=0;$<7;$++){const S=7*E+$;let D,I=a,M=i,A="current";S<=O?(D=X-O+S,I=t,M=n,A="last"):S<=j?D=S-O:(D=S-j,I=u,M=k,A="next"),c(ge({day:D,month:I,year:M,id:S,week:E,dayOfWeek:$,class:A,selected:!1,events:xe(v,M,I,D)}))}}return g.exports.useEffect(()=>{s()},[i,a,v]),e(Ee,{auth:r,children:p("div",{className:"relative flex flex-col h-full p-2 overflow-hidden calender",children:[e("header",{className:"flex-col items-center justify-center flex-none fllex",children:p("div",{className:"flex flex-col gap-1 text-center",children:[e(Re,{className:"w-max ml-4"}),e(Te,{date:{year:i,month:a},updateYear:t=>{Y(t),setSelected(null)},updateMonth:t=>{U(t),setSelected(null)}})]})}),e("main",{className:"self-center flex-none w-11/12 my-2",children:p("table",{className:"box-border w-full text-center table-auto",children:[e("thead",{children:e("tr",{children:o.map(t=>e("th",{children:t},t))})}),e("tbody",{children:f.map((t,n)=>e("tr",{children:t.map(u=>e($e,{date:u},u.id))},n))})]})}),p("footer",{className:"flex flex-col overflow-hidden shrink",children:[d!==null&&e(Me,{}),x&&e(ze,{}),h&&e(Ae,{}),e(Ie,{handleClick:()=>setUsingForm(!0)})]})]})})}export{Be as default};
